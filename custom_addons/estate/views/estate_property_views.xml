<odoo>
  <data>
    <!-- explicit list view definition -->

    <record model="ir.ui.view" id="estate_property_list">
      <field name="name">Properties</field>
      <field name="model">estate.property</field>
      <field name="arch" type="xml">
        <list  decoration-success="state in ['offer-received', 'offer-accepted']"
          decoration-bf="'state'== 'offer-accepted'" decoration-muted="'state'=='sold'">
          <field name="name" string="Title" />
          <field name="state" string="Status" />
          <field name="property_type_id" />
          <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}" />
          <field name="postcode" />
          <field name="tag_ids" />
          <field name="bedrooms" />
          <field name="living_area" />
          <field name="expected_price" width="100px" />
          <field name="selling_price" width="100px" />
          <field name="date_availability" string="Availabile From" width="100px" optional="hide" />
        </list>
      </field>
    </record>

    <!-- Form view definition -->

    <record model="ir.ui.view" id="estate_property_form">
      <field name="name">estate.property.view.form</field>
      <field name="model">estate.property</field>
      <field name="arch" type="xml">
        <form string="Estate Property" create="True" edit="True">
          <header>
            <div invisible="state in ['sold','cancelled']"
              style="gap: 5px !important; display: flex;">
              <button name="action_sell_property" type="object" string="Sold" />
              <button name="action_cancel_property" type="object" string="Cancel" />
            </div>
            <field name="state" widget="statusbar"
              statusbar_visible="new,offer-received,offer-accepted,sold" />
          </header>
          <sheet>
            <!-- <div class="oe_button_box" name="button_box">
              <button type="action" class="oe_stat_button" icon="fa-">
                <span>Edit</span>
              </button>
              <button type="action" class="oe_stat_button" icon="fa-">
                <span>Create</span>
              </button>
            </div> -->
            <group name="name">
              <field name="name" nolabel="1" class="h1" />
            </group>

            <group>

              <field nolabel="1" name="tag_ids" widget="many2many_tags"
                options="{'color_field': 'color'}" />

            </group>
            <group>
              <group>
                <field name="state" string="Status" invisible="state not in ['sold','cancelled']"
                  readonly="1" />
                <field name="property_type_id" class='text-primary' options="{'no_create': true,}" />
                <field name="postcode" />
                <field name="date_availability" string="Availabile From" />
              </group>
              <group>
                <field name="expected_price" />
                <field name="best_price" string="Best Offer" />
                <field name="selling_price" />
              </group>
            </group>
            <notebook>
              <page string="Description">
                <group>
                  <field name="description" />
                  <field name="bedrooms" />
                  <field name="living_area" />
                  <field name="facades" />
                  <field name="garage" />
                  <field name="garden" />

                  <field name="garden_area" invisible="not garden" />
                  <field name="garden_orientation" invisible="not garden" />
                  <field name="total_area" />
                </group>
              </page>
              <page name="Offers" string="Offers">
                <field name="offer_ids" readonly="state in ['sold','cancelled', 'offer-accepted']" />
              </page>
              <page name="Other" string="Other Info">
                <group>
                  <field name="user_id" />
                  <field name="buyer_id" />
                </group>
              </page>

            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <!-- Search view definition -->

    <record model="ir.ui.view" id="estate_property_search">
      <field name="name">estate.property.view.search</field>
      <field name="model">estate.property</field>
      <field name="arch" type="xml">
        <search string="Real Estate Properties">
          <field name="name" string="Title" />
          <field name="property_type_id" />
          <field name="tag_ids" />
          <field name="postcode" />
          <field name="expected_price" />
          <field name="bedrooms" />
          <field name="living_area"
            filter_domain="['|', ('living_area', '=', self), ('living_area', '>', self)]" />
          <field name="facades" />
          <separator />
          <filter string="Available" name="available"
            domain="[ '|', ('state', '=', 'new'), ('state', 'in', ['offer-received'])]" />
          <group expand="1" string="Group By">
            <filter string="Postal Code " name="postcode" context="{'group_by':'postcode'}" />
          </group>

        </search>
      </field>
    </record>

    <!-- server action to the one above -->
    <!--
    <record model="ir.actions.server" id="estate.action_server">
      <field name="name">estate server</field>
      <field name="model_id" ref="model_estate_estate"/>
      <field name="state">code</field>
      <field name="code">
        action = {
          "type": "ir.actions.act_window",
          "view_mode": "list,form",
          "res_model": model._name,
        }
      </field>
    </record>
-->


  </data>
</odoo>